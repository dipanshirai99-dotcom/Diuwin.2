<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Demo Colour Trading — Practice Game (Demo Only)</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#7c3aed}
    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071024 0%, #071a2a 100%);color:#e6eef6}
    .wrap{max-width:980px;margin:36px auto;padding:20px}
    h1{font-size:22px;margin:0 0 6px}
    p.lead{margin:0 0 18px;color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px}
    .card{background:rgba(255,255,255,0.02);border-radius:16px;padding:18px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}

    .center{display:flex;align-items:center;justify-content:center}
    .controls{display:flex;gap:10px;align-items:center}

    .color-btn{padding:16px 28px;border-radius:12px;border:0;font-weight:700;cursor:pointer;font-size:16px}
    .red{background:linear-gradient(180deg,#ff6b6b,#ff3b3b);color:#111}
    .green{background:linear-gradient(180deg,#85f09b,#2bd16f);color:#072510}

    .muted{color:var(--muted);font-size:13px}
    .timer{font-size:42px;font-weight:800;letter-spacing:1px}

    .small{font-size:13px}
    .row{display:flex;gap:12px;align-items:center}

    .history{max-height:260px;overflow:auto;margin-top:12px;padding-right:6px}
    .hist-item{display:flex;justify-content:space-between;padding:8px;border-radius:8px;margin-bottom:8px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));font-size:13px}

    .balance{font-size:18px;font-weight:700}
    .muted-2{color:#99a7b7}

    .footer{margin-top:16px;color:var(--muted);font-size:13px}

    @media (max-width:880px){.grid{grid-template-columns:1fr;}.card{padding:14px}}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Demo Colour Trading — Practice Game</h1>
    <p class="lead">This is a <strong>demo / educational</strong> game. No real money, only points. Use it to practice UI, logic or demo a site.</p>

    <div class="grid">
      <div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <div>
              <div class="muted small">Balance (demo points)</div>
              <div id="balance" class="balance">1000</div>
            </div>

            <div style="text-align:right">
              <div class="muted small">Round</div>
              <div id="roundNumber" style="font-weight:700">0</div>
            </div>
          </div>

          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px">
            <div style="flex:1">
              <div class="muted small">Time left</div>
              <div id="timer" class="timer">--</div>
              <div class="muted small">Choose red or green before the timer ends. Result is random (demo).</div>
            </div>

            <div style="width:220px">
              <div class="muted small">Stake (demo points)</div>
              <input id="stake" type="number" min="10" step="10" value="100" style="width:100%;padding:10px;border-radius:8px;border:0;margin-top:6px;background:rgba(255,255,255,0.02);color:inherit">
            </div>
          </div>

          <div class="row" style="margin-bottom:12px">
            <button id="btnRed" class="color-btn red" style="flex:1">Choose RED</button>
            <button id="btnGreen" class="color-btn green" style="flex:1">Choose GREEN</button>
          </div>

          <div style="display:flex;gap:10px;align-items:center;margin-bottom:6px">
            <button id="startBtn" style="padding:10px 14px;border-radius:10px;border:0;cursor:pointer">Start Round</button>
            <div class="muted">Auto-start when previous round ends</div>
          </div>

          <div id="resultBox" style="margin-top:12px;display:none;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02)">
            <div class="muted small" id="resultText">Result will appear here</div>
          </div>

          <div class="footer">Tip: This is fully client-side. You can inspect and modify code in the browser. Do not use for real money.</div>
        </div>

        <div class="card" style="margin-top:12px">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
            <div><strong>History</strong> <span class="muted">(latest first)</span></div>
            <div class="muted small">Wins/Losses</div>
          </div>
          <div id="history" class="history"></div>
        </div>
      </div>

      <div>
        <div class="card">
          <h3 style="margin-top:0">Round Settings</h3>
          <div style="margin-bottom:8px"><span class="muted small">Round length (seconds)</span></div>
          <input id="roundLength" type="number" min="5" max="60" value="10" style="width:100%;padding:10px;border-radius:8px;border:0;background:rgba(255,255,255,0.02);color:inherit">

          <div style="margin-top:12px"><span class="muted small">Payout multiplier (demo)</span></div>
          <input id="multiplier" type="number" min="1" step="0.1" value="1.9" style="width:100%;padding:10px;border-radius:8px;border:0;background:rgba(255,255,255,0.02);color:inherit">

          <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
            <button id="resetBtn" style="padding:10px 12px;border-radius:10px;border:0;cursor:pointer">Reset Game</button>
            <button id="fillBtn" style="padding:10px 12px;border-radius:10px;border:0;cursor:pointer">Add +1000 pts</button>
          </div>

          <hr style="margin:12px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)">
          <div class="muted small">About</div>
          <div class="muted-2 small" style="margin-top:8px">This demo generates a random result each round. You can use it as a prototype for UI, testing, or teaching game flow. No servers, no payments.</div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="margin-top:0">How to use</h3>
          <ol style="padding-left:18px;margin:0 0 8px">
            <li class="small muted">Set stake and round length.</li>
            <li class="small muted">Click "Start Round". Timer starts.</li>
            <li class="small muted">Choose a colour before timer ends.</li>
            <li class="small muted">When timer hits 0, result (red/green) is revealed and balance is updated.</li>
          </ol>

          <div style="margin-top:8px" class="muted small">This is demo only. Do not use for real-money games.</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const balanceEl = document.getElementById('balance');
    const timerEl = document.getElementById('timer');
    const stakeInput = document.getElementById('stake');
    const btnRed = document.getElementById('btnRed');
    const btnGreen = document.getElementById('btnGreen');
    const startBtn = document.getElementById('startBtn');
    const resultBox = document.getElementById('resultBox');
    const resultText = document.getElementById('resultText');
    const historyEl = document.getElementById('history');
    const roundLengthInput = document.getElementById('roundLength');
    const multiplierInput = document.getElementById('multiplier');
    const resetBtn = document.getElementById('resetBtn');
    const fillBtn = document.getElementById('fillBtn');
    const roundNumberEl = document.getElementById('roundNumber');

    const STORAGE_KEY = 'demo_colour_trading_v1';
    const defaultState = { balance: 1000, history: [], round: 0 };
    let state = loadState();

    let timer = null;
    let timeLeft = 0;
    let userChoice = null;
    let running = false;

    renderState();

    btnRed.addEventListener('click', ()=>choose('red'));
    btnGreen.addEventListener('click', ()=>choose('green'));
    startBtn.addEventListener('click', startRound);
    resetBtn.addEventListener('click', resetGame);
    fillBtn.addEventListener('click', ()=>{ state.balance += 1000; saveState(); renderState(); });

    function choose(col){
      if(!running){ return alert("Start round first"); }
      userChoice = col;
      highlightChoice();
    }

    function highlightChoice(){
      btnRed.style.outline = userChoice === 'red' ? '4px solid rgba(255,107,107,0.25)' : 'none';
      btnGreen.style.outline = userChoice === 'green' ? '4px solid rgba(133,240,155,0.25)' : 'none';
    }

    function startRound(){
      if(running){ return alert("Round already running"); }

      const stake = parseInt(stakeInput.value)||0;
      if(stake <= 0) return alert("Stake must be > 0");
      if(stake > state.balance) return alert("Not enough balance");

      running = true;
      userChoice = null; highlightChoice();
      resultBox.style.display = 'none';

      timeLeft = parseInt(roundLengthInput.value) || 10;
      timerEl.textContent = timeLeft;
      roundNumberIncrement();

      timer = setInterval(()=>{
        timeLeft -= 1;
        timerEl.textContent = timeLeft;
        if(timeLeft <= 0){
          clearInterval(timer);
          timer = null;
          resolveRound();
        }
      },1000);
    }

    function resolveRound(){
      const rand = Math.random();
      const result = rand < 0.5 ? 'red' : 'green';

      const stake = parseInt(stakeInput.value)||0;
      const multiplier = parseFloat(multiplierInput.value)||1.9;

      let won = false; 
      let profit = 0;

      if(userChoice && userChoice === result){
        won = true;
        profit = Math.floor(stake * (multiplier - 1));
        state.balance += profit;
      } else {
        state.balance -= stake;
      }

      const entry = {
        time: new Date().toISOString(),
        round: state.round,
        stake,
        choice: userChoice || 'none',
        result,
        won,
        profit
      };

      state.history.unshift(entry);
      state.history = state.history.slice(0,200);

      saveState(); renderState();

      resultBox.style.display = 'block';
      resultText.innerHTML = `
        Result: <strong>${result.toUpperCase()}</strong> —
        ${won ? 'WIN (+'+profit+')' : 'LOSE (-'+stake+')'}
      `;

      running = false;
      userChoice = null; highlightChoice();
    }

    function renderState(){
      balanceEl.textContent = state.balance;
      roundNumberEl.textContent = state.round;
      historyEl.innerHTML = '';

      for(const h of state.history){
        const d = new Date(h.time);
        const div = document.createElement('div');
        div.className = 'hist-item';
        div.innerHTML = `
          <div>
            <div style="font-weight:700">Round ${h.round}</div>
            <div class="muted small">${d.toLocaleString()}</div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:700">${h.result.toUpperCase()}</div>
            <div class="muted small">${h.won?'+':'-'}${h.won?h.profit:h.stake}</div>
          </div>
        `;
        historyEl.appendChild(div);
      }
    }

    function saveState(){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    function loadState(){
      try{
        const s = JSON.parse(localStorage.getItem(STORAGE_KEY));
        return Object.assign({}, defaultState, s||{});
      }catch(e){
        return Object.assign({}, defaultState);
      }
    }

    function resetGame(){
      if(confirm("Reset demo data?")){
        state = Object.assign({}, defaultState);
        saveState(); renderState();
      }
    }

    function roundNumberIncrement(){
      state.round = (state.round || 0) + 1;
    }

  </script>
</body>
                                               </html>
