<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tirupati Club Final</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #FF9800;
            --secondary: #FF5722;
            --bg-gray: #f5f5f5;
            --green: #4CAF50;
            --violet: #9C27B0;
            --red: #F44336;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body {
            font-family: 'Roboto', sans-serif; background: #f5f5f5; margin: 0;
            display: flex; justify-content: center; min-height: 100vh;
        }

        .app-container {
            width: 100%; max-width: 480px; background: #fff;
            min-height: 100vh; position: relative; padding-bottom: 70px;
        }

        /* --- LOGIN / REGISTER PAGE --- */
        #authSection {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #ff9a00, #ff5320);
            z-index: 9999; display: flex; flex-direction: column; 
            justify-content: center; padding: 30px;
            transition: transform 0.4s ease;
        }
        
        .auth-card {
            background: white; padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .auth-header { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 25px; color: #333; }
        
        .inp-box { margin-bottom: 15px; }
        .inp-label { font-size: 13px; color: #666; margin-bottom: 5px; display: block; }
        .inp-field {
            width: 100%; padding: 12px; border: 1px solid #ddd; 
            border-radius: 8px; font-size: 16px;
        }
        .inp-field:focus { border-color: var(--primary); }

        .btn-auth {
            width: 100%; padding: 14px; border: none; border-radius: 25px;
            background: linear-gradient(to right, #ff9a00, #ff5320);
            color: white; font-size: 16px; font-weight: bold; cursor: pointer;
            margin-top: 10px; box-shadow: 0 5px 10px rgba(255,87,34,0.3);
            display: flex; justify-content: center; align-items: center; gap: 10px;
        }
        .btn-auth:active { transform: scale(0.98); }
        
        .toggle-link {
            text-align: center; margin-top: 20px; font-size: 14px; 
            color: var(--secondary); cursor: pointer;
        }

        /* --- MAIN APP --- */
        .header {
            background: linear-gradient(to right, #ff9a00, #ff5320);
            padding: 15px 20px 40px; color: white;
            border-bottom-left-radius: 20px; border-bottom-right-radius: 20px;
        }
        .top-bar { display: flex; justify-content: space-between; align-items: center; font-size: 18px; }

        .wallet-box {
            background: white; margin: -30px 15px 10px; padding: 20px;
            border-radius: 15px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            position: relative; z-index: 10;
        }

        .bal-display { font-size: 30px; font-weight: bold; margin: 10px 0; color: #333; }

        .action-row { display: flex; gap: 10px; margin-top: 15px; }
        .act-btn {
            flex: 1; padding: 10px; border: none; border-radius: 20px; 
            color: white; font-weight: 500; font-size: 14px;
        }

        /* Game Section */
        .game-frame {
            background: linear-gradient(to right, #ffa726, #fb8c00);
            margin: 15px; border-radius: 15px; padding: 15px; color: white;
            display: flex; justify-content: space-between; align-items: center;
        }
        .timer-big { font-size: 26px; font-weight: bold; letter-spacing: 2px; }

        .bet-area { padding: 0 15px; }
        .color-group { display: flex; gap: 10px; margin-bottom: 20px; }
        .c-btn {
            flex: 1; padding: 12px; border: none; border-radius: 8px; 
            color: white; font-size: 16px; font-weight: 500;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .num-grid {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 20px;
        }
        .n-btn {
            aspect-ratio: 1; border-radius: 50%; border: none; color: white;
            font-size: 18px; font-weight: bold;
        }

        /* --- BOTTOM NAV --- */
        .navbar {
            position: fixed; bottom: 0; width: 100%; max-width: 480px;
            background: white; display: flex; justify-content: space-around;
            padding: 10px 0; border-top: 1px solid #eee; z-index: 100;
        }
        .nav-icon { text-align: center; color: #999; font-size: 12px; flex: 1; }
        .nav-icon.active { color: var(--primary); }
        .nav-icon i { font-size: 20px; display: block; margin-bottom: 4px; }

        /* Helpers */
        .hidden { display: none !important; }
        .loader {
            border: 3px solid #f3f3f3; border-top: 3px solid #fff;
            border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Toast */
        .toast {
            position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.8); color: white; padding: 10px 20px;
            border-radius: 20px; opacity: 0; pointer-events: none; transition: 0.3s; z-index: 2000;
        }
        .toast.show { opacity: 1; }

    </style>
</head>
<body>

    <div class="app-container">
        
        <div id="authSection">
            <div id="loginForm" class="auth-card">
                <div class="auth-header">Login</div>
                <div class="inp-box">
                    <label class="inp-label"><i class="fas fa-mobile-alt"></i> Phone Number</label>
                    <input type="number" id="lPhone" class="inp-field" placeholder="Enter Mobile Number">
                </div>
                <div class="inp-box">
                    <label class="inp-label"><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="lPass" class="inp-field" placeholder="Enter Password">
                </div>
                <button class="btn-auth" onclick="doLogin()">
                    <span id="lBtnText">Log In</span>
                    <div id="lLoader" class="loader hidden"></div>
                </button>
                <div class="toggle-link" onclick="showRegister()">Create an account</div>
            </div>

            <div id="regForm" class="auth-card hidden">
                <div class="auth-header">Register</div>
                <div class="inp-box">
                    <label class="inp-label">Phone Number</label>
                    <input type="number" id="rPhone" class="inp-field" placeholder="Enter Mobile Number">
                </div>
                <div class="inp-box">
                    <label class="inp-label">Set Password</label>
                    <input type="password" id="rPass" class="inp-field" placeholder="Create Password">
                </div>
                <div class="inp-box">
                    <label class="inp-label">Invite Code</label>
                    <input type="text" class="inp-field" placeholder="Optional">
                </div>
                <button class="btn-auth" onclick="doRegister()">
                    <span id="rBtnText">Register</span>
                    <div id="rLoader" class="loader hidden"></div>
                </button>
                <div class="toggle-link" onclick="showLogin()">Already have an account? Login</div>
            </div>
        </div>

        <div id="mainApp" class="hidden">
            
            <div class="header">
                <div class="top-bar">
                    <div style="font-weight:700;">TIRUPATI CLUB</div>
                    <div><i class="fas fa-download"></i></div>
                </div>
                <div style="margin-top:10px; font-size:14px;">User: <span id="uName">Guest</span></div>
            </div>

            <div class="wallet-box">
                <div style="color:#777; font-size:12px;">Available Balance</div>
                <div class="bal-display">₹ <span id="balance">0.00</span></div>
                <div class="action-row">
                    <button class="act-btn" style="background:#F44336;" onclick="alert('Withdraw disabled in demo')">Withdraw</button>
                    <button class="act-btn" style="background:#4CAF50;" onclick="deposit()">Deposit</button>
                </div>
            </div>

            <div class="game-frame">
                <div>
                    <div style="font-size:12px; margin-bottom:5px;"><i class="fas fa-trophy"></i> Win Go 30Sec</div>
                    <div id="periodID" style="font-size:16px;">20241001</div>
                </div>
                <div style="text-align:right;">
                    <div style="font-size:12px;">Time Remaining</div>
                    <div class="timer-big" id="timer">00:30</div>
                </div>
            </div>

            <div class="bet-area">
                <div class="color-group">
                    <button class="c-btn" style="background:#4CAF50;" onclick="placeBet('Green')">Green</button>
                    <button class="c-btn" style="background:#9C27B0;" onclick="placeBet('Violet')">Violet</button>
                    <button class="c-btn" style="background:#F44336;" onclick="placeBet('Red')">Red</button>
                </div>
                
                <div class="num-grid">
                    <button class="n-btn" style="background:linear-gradient(135deg,#F44336,#9C27B0)" onclick="placeBet('0')">0</button>
                    <button class="n-btn" style="background:#4CAF50" onclick="placeBet('1')">1</button>
                    <button class="n-btn" style="background:#F44336" onclick="placeBet('2')">2</button>
                    <button class="n-btn" style="background:#4CAF50" onclick="placeBet('3')">3</button>
                    <button class="n-btn" style="background:#F44336" onclick="placeBet('4')">4</button>
                    <button class="n-btn" style="background:linear-gradient(135deg,#4CAF50,#9C27B0)" onclick="placeBet('5')">5</button>
                    <button class="n-btn" style="background:#F44336" onclick="placeBet('6')">6</button>
                    <button class="n-btn" style="background:#4CAF50" onclick="placeBet('7')">7</button>
                    <button class="n-btn" style="background:#F44336" onclick="placeBet('8')">8</button>
                    <button class="n-btn" style="background:#4CAF50" onclick="placeBet('9')">9</button>
                </div>
            </div>

            <div style="padding:15px; margin-bottom:60px;">
                <h4 style="color:#555; border-bottom:1px solid #eee; padding-bottom:10px;">Game Record</h4>
                <div id="historyList"></div>
            </div>

            <div class="navbar">
                <div class="nav-icon active"><i class="fas fa-home"></i> Home</div>
                <div class="nav-icon"><i class="fas fa-chart-line"></i> Activity</div>
                <div class="nav-icon"><i class="fas fa-wallet"></i> Wallet</div>
                <div class="nav-icon" onclick="doLogout()"><i class="fas fa-user"></i> Account</div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast">Message</div>

    <script>
        // --- LOGIC ---
        let userBalance = 0.00;
        let timer = 30;
        let period = 20241001;
        let interval;

        // Check Login on Load
        window.onload = function() {
            const savedUser = localStorage.getItem('tirupatiUser');
            if(savedUser) {
                // If logged in, skip login screen
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('mainApp').classList.remove('hidden');
                document.getElementById('uName').innerText = savedUser;
                loadBalance();
                startGame();
            }
        };

        // --- AUTH FUNCTIONS ---
        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('regForm').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('regForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }

        function doLogin() {
            const phone = document.getElementById('lPhone').value;
            const pass = document.getElementById('lPass').value;

            if(!phone || !pass) {
                showToast("Please enter Number and Password");
                return;
            }

            // Visual Loading Effect
            document.getElementById('lBtnText').classList.add('hidden');
            document.getElementById('lLoader').classList.remove('hidden');

            setTimeout(() => {
                localStorage.setItem('tirupatiUser', phone);
                enterApp(phone);
            }, 1000); // 1 second fake delay
        }

        function doRegister() {
            const phone = document.getElementById('rPhone').value;
            const pass = document.getElementById('rPass').value;

            if(!phone || !pass) {
                showToast("Please fill all details");
                return;
            }

            document.getElementById('rBtnText').classList.add('hidden');
            document.getElementById('rLoader').classList.remove('hidden');

            setTimeout(() => {
                localStorage.setItem('tirupatiUser', phone);
                localStorage.setItem('tirupatiBal', '50'); // Bonus
                enterApp(phone);
                showToast("Registration Success! +₹50 Bonus");
            }, 1000);
        }

        function enterApp(phone) {
            document.getElementById('authSection').style.display = 'none'; // Completely remove auth layer
            document.getElementById('mainApp').classList.remove('hidden');
            document.getElementById('uName').innerText = phone;
            loadBalance();
            startGame();
        }

        function doLogout() {
            if(confirm("Do you want to logout?")) {
                localStorage.removeItem('tirupatiUser');
                location.reload();
            }
        }

        // --- GAME FUNCTIONS ---
        function loadBalance() {
            const bal = localStorage.getItem('tirupatiBal');
            if(bal) userBalance = parseFloat(bal);
            updateBalUI();
        }

        function updateBalUI() {
            document.getElementById('balance').innerText = userBalance.toFixed(2);
        }

        function deposit() {
            userBalance += 500;
            localStorage.setItem('tirupatiBal', userBalance);
            updateBalUI();
            showToast("Deposit Successful: +₹500");
        }

        function startGame() {
            clearInterval(interval);
            interval = setInterval(() => {
                timer--;
                if(timer < 0) {
                    timer = 30;
                    period++;
                    generateResult();
                }
                // Update Timer UI
                let sec = timer < 10 ? '0'+timer : timer;
                document.getElementById('timer').innerText = `00:${sec}`;
                document.getElementById('periodID').innerText = period;
            }, 1000);
        }

        function placeBet(choice) {
            if(userBalance < 10) {
                showToast("Insufficient Balance! Please Deposit.");
                return;
            }
            userBalance -= 10;
            localStorage.setItem('tirupatiBal', userBalance);
            updateBalUI();
            showToast(`Join ${choice} Successful (-₹10)`);
        }

        function generateResult() {
            // Fake result logic
            const colors = ['Green', 'Red', 'Violet'];
            const rColor = colors[Math.floor(Math.random() * colors.length)];
            const rNum = Math.floor(Math.random() * 10);
            
            const div = document.createElement('div');
            div.style.cssText = "display:flex; justify-content:space-between; padding:10px; background:#f9f9f9; border-bottom:1px solid #ddd; margin-bottom:5px;";
            div.innerHTML = `<span>${period-1}</span> <span style="font-weight:bold; color:${getColor(rColor)}">${rNum} ${rColor}</span>`;
            
            const list = document.getElementById('historyList');
            list.prepend(div);
            if(list.children.length > 5) list.lastChild.remove();
        }

        function getColor(name) {
            if(name==='Green') return '#4CAF50';
            if(name==='Red') return '#F44336';
            return '#9C27B0';
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
